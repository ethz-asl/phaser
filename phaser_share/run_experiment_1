#!/usr/bin/env zsh
REST=$@
#EXP_DIR="/home/berlukas/Documents/ply_datasets/phaser_v2/exp/"
#EXP_DIR="/home/berlukas/Documents/ply_datasets/phaser_v2/experiments/real-world-distilled/3.75/"
#EXP_DIR="/home/berlukas/Documents/ply_datasets/phaser_v2/experiments/real-world/"
#EXP_DIR="/home/berlukas/Documents/ply_datasets/phaser_v2/experiments/exp-partial-overlap/30/"
#EXP_DIR="/home/berlukas/Documents/ply_datasets/phaser_v2/experiments/exp-occlusion/100/"
#EXP_DIR="/home/berlukas/Documents/ply_datasets/phaser_v2/experiments/exp-40db/2/"
EXP_DIR="/home/berlukas/Documents/ply_datasets/phaser_v2/experiments/exp-50db/kitti/"

rosrun phaser_ros phaser_ros \
    --alsologtostderr=1 \
    --v=3 \
		--enable_debug=true \
		--registration_algorithm="sph-opt" \
		--datasource="ply" \
		--PlyReadDirectory="${EXP_DIR}" \
    --app_mode="experiment1" \
    --truth_file="${EXP_DIR}ground_truth.txt" \
    --n_clouds_to_process=0 \
    --phaser_core_spherical_bandwidth=150 \
    --phaser_core_spherical_low_pass_lower_bound=000 \
    --phaser_core_spherical_low_pass_upper_bound=10000 \
    --phaser_core_spherical_zero_padding=10 \
    --phaser_core_spatial_n_voxels=201 \
    --phaser_core_spatial_discretize_lower=-50 \
    --phaser_core_spatial_discretize_upper=50 \
    --phaser_core_spatial_low_pass_lower_bound=85 \
    --phaser_core_spatial_low_pass_upper_bound=115 \
    --phaser_core_spatial_zero_padding=0 \
    --gaussian_peak_neighbors=3 \
    --bingham_peak_neighbors=3 \
    --z_score_filter_threshold=0.01 \
    --z_score_lag_max=3 \
    --z_score_threshold=3.0 \
    --phaser_pre_enable_geometric_cloud_segmentation=false \
    --phaser_pre_enable_pass_through_gnd_filtering=false \
    $REST
